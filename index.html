<!DOCTYPE html>
<html lang="fa">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø±ÙˆØ²Ø´Ù…Ø§Ø± Ø®Ø±ÛŒØ¯ Ù…ÙˆØ³ Ùˆ Ú©ÛŒØ¨ÙˆØ±Ø¯</title>
    <link rel="manifest" href="manifest.json" />
</head>

<body>
    <h1>ğŸ¯ Ø±ÙˆØ²Ø´Ù…Ø§Ø± Ø®Ø±ÛŒØ¯ Ù…ÙˆØ³ Ùˆ Ú©ÛŒØ¨ÙˆØ±Ø¯</h1>
    <p id="message">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡...</p>
    <script>
        const targetDate = new Date('2025-07-27T00:00:00+03:30'); // ÙˆÙ‚Øª Ø§ÛŒØ±Ø§Ù†
        const dailyMessage = "ğŸ˜ ÙÙ‚Ø· ( ) Ø±ÙˆØ² Ø¯ÛŒÚ¯Ù‡ Ù…ÙˆÙ†Ø¯Ù‡ ØªØ§ Ø¨Ø±ÛŒÙ… Ù…ÙˆØ³ ğŸ–±ï¸ Ùˆ Ú©ÛŒØ¨ÙˆØ±Ø¯ âŒ¨ï¸ Ø±Ùˆ Ø¨Ø®Ø±ÛŒÙ…! ğŸ”¥";
        const finalMessage = "ğŸš€ Ù¾Ø§Ø´Ùˆ Ø¨Ø±ÛŒÙ… Ù…ÙˆØ³ ğŸ–±ï¸ Ùˆ Ú©ÛŒØ¨ÙˆØ±Ø¯ âŒ¨ï¸ Ø¨Ø®Ø±ÛŒÙ…! ğŸ‰";

        function updateMessage() {
            const now = new Date();
            const diffTime = targetDate - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const message = diffDays > 0 ? dailyMessage.replace("( )", diffDays) : finalMessage;
            document.getElementById("message").innerText = message;
        }

        updateMessage();

        // Schedule notifications at 15:00 and 21:00 Tehran time
        function scheduleNotification(hour) {
            setInterval(() => {
                const now = new Date();
                const tehranOffset = -210; // UTC+3:30 in minutes
                const localOffset = now.getTimezoneOffset();
                const tehranTime = new Date(now.getTime() + (tehranOffset - localOffset) * 60000);

                if (tehranTime.getHours() === hour && tehranTime.getMinutes() === 0) {
                    showNotification();
                }
            }, 60000); // check every minute
        }

        function showNotification() {
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    const now = new Date();
                    const diffDays = Math.ceil((targetDate - now) / (1000 * 60 * 60 * 24));
                    const body = diffDays > 0 ? dailyMessage.replace("( )", diffDays) : finalMessage;
                    new Notification("ğŸ“ ÛŒØ§Ø¯Ø¢ÙˆØ± Ø®Ø±ÛŒØ¯", { body });
                }
            });
        }
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker Registered'));
}
</script>

        scheduleNotification(15);
        scheduleNotification(21);
    </script>
</body>

</html>
